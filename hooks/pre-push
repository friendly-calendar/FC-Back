echo "Running git pre-commit hook"

./gradlew ktlintFormat --daemon

STATUS=$?

git add .

if git diff-index --cached --quiet HEAD --; then
    echo "No changes to commit."
else
    git commit -m 'format'
    git push origin HEAD
fi

[ $STATUS -eq 0 ] || exit 1
exit 0